---
import IconText from '@/components/common/IconText.astro';
import SectionContainer from '@/components/common/SectionContainer.astro';
import Calendar from '@/components/icons/regular/Calendar.astro';
import Company from '@/components/icons/regular/Company.astro';
import Job from '@/components/icons/regular/Job.astro';
import Responsibilities from '@/components/icons/regular/Responsibilities.astro';
import Layout from '@/layouts/Layout.astro';
import Stack from '@/components/icons/regular/Stack.astro';
import { getExperiencePaths, parseExperience } from '@/utils/page-experience';

export const getStaticPaths = getExperiencePaths;
const { experience } = Astro.props;
const { date, title, company, descriptionLong, stackLong, Content } = await parseExperience(experience);
---

<Layout title={title} description={descriptionLong}>
  <SectionContainer>
    <div class="space-y-16 rounded-2xl bg-white/5 p-10">
      <div>
        <button
          onclick="window.history.back()"
          class="text-3xl text-accent duration-500 hover:scale-110 hover:text-accent-light"
        >
          ←
        </button>
      </div>

      <section>
        <IconText
          Icon={Calendar}
          text={date}
          iconClass="text-secondary"
          iconSize="4"
          textClass="text-secondary text-sm"
        />
        <IconText
          Icon={Job}
          text={title}
          iconClass="text-primary"
          iconSize="4"
          textClass="text-lg md:text-2xl font-semibold"
        />
        <IconText
          Icon={Company}
          text={company}
          iconClass="text-accent"
          iconSize="4"
          textClass="text-accent text-lg md:text-xl"
        />
      </section>

      <section>
        <div class="text-lg text-secondary"><p>{descriptionLong}</p></div>
      </section>

      <section>
        <IconText
          class="pb-10"
          Icon={Stack}
          text="Stack"
          iconClass="text-primary"
          iconSize="6"
          textClass="text-xl font-semibold"
        />
        <div class="flex flex-wrap gap-2">
          {stackLong.map((item) => <span class="rounded-full bg-accent px-4 py-1.5 text-sm">{item}</span>)}
        </div>
      </section>

      <section>
        <IconText
          class="pb-10"
          Icon={Responsibilities}
          text="Responsibilities"
          iconClass="text-primary"
          iconSize="6"
          textClass="text-xl font-semibold"
        />
        <div class="text-lg text-secondary">
          <Content />
        </div>
      </section>

      <div class="flex justify-center">
        <button
          onclick="window.history.back()"
          class="text-4xl text-accent duration-500 hover:scale-110 hover:text-accent-light">☑︎</button
        >
      </div>
    </div>
  </SectionContainer>
</Layout>
